<div class="container home-color">
	<div class="row">
		<div class="col-2 lorem">
			<h1>It's Your Love.<br>Tell Your Story.</h1>

			<a href="/products" class="btn-1">Get Started</a>
		</div>
		<div class="col-2">
			<img src="https://res.cloudinary.com/coder-nhatpro/image/upload/v1603504743/book3_hvghcq.jpg">
		</div>
	</div>
</div>
<div class="categories">
	<div class="small-container">
		<h2 class="title">Sản Phẩm Nổi Bật</h2>
		<div class="row" id="featured">
		</div>
	</div>
</div>
<div class="categories">
	<div class="small-container">
		<h2 class="title">Sản Phẩm Mới Nhất</h2>
		<div class="row" id="latest">
		</div>
	</div>
</div>

<script>
	async function getFeaturedProducts() {
		// const url = 'https://coder-nhat.herokuapp.com/featuredproducts'
		 const url = 'http://localhost:3000/featuredproducts'
		try {
			const response = await axios.get(url);
			renderProduct(response.data.records,"featured")
		} catch (error) {
			console.error(error);
		}
	}

	async function getLatestsProducts() {
		// const url = 'https://coder-nhat.herokuapp.com/latestproducts'
		const url = 'http://localhost:3000/latestproducts'
		try {
			const response = await axios.get(url);
			renderProduct(response.data.records,"latest")
		} catch (error) {
			console.error(error);
		}
	}

	function renderProduct(products, id) {
		const listHTML = document.getElementById(id);
		try {
			let content = products.map((item) => {
				return `<div class="col-4">
        <div class="new-box">
          <img src="${item.image}">
          <div class="new-link">
            <a href="/products/view/${item._id}" class="button">XEM SẢN PHẨM</a>
          </div>
        </div>
        <p id="gia"> ${item.price.toLocaleString('de-DE', { style: 'currency', currency: 'VND' })}</p>
      </div>`
			})
			listHTML.innerHTML = content.join('');
		} catch{
		}
	}
	getFeaturedProducts();
	getLatestsProducts();
</script>